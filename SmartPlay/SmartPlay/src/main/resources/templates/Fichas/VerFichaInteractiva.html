{{> header}}

<div class="container mt-4">
  <div class="d-flex align-items-center justify-content-between mb-4">
    <h1 class="mb-0">Vista de Ficha Interactiva</h1>

    {{#User}}
    <!-- Bot칩n de Me Gusta -->
<form id="likeForm" onsubmit="return false;" class="ms-auto">
  <input type="hidden" name="_csrf" value="{{token}}" />
  <input type="hidden" id="fichaId" value="{{ficha.id}}" />
  <button id="likeButton" class="btn btn-link p-0" onclick="darMeGusta()" style="text-decoration: none;">
    <span id="corazon" data-liked="{{tieneLike}}" style="font-size: 2rem;">
      {{#tieneLike}}仇벒잺{{/tieneLike}}{{^tieneLike}}游밼{{/tieneLike}}
    </span>
    <span id="contadorLikes" class="ms-2 text-danger">{{ficha.meGusta}}</span>
  </button>
</form>
    {{/User}}

  </div>

  <!-- 츼rea principal con imagen de fondo y elementos superpuestos -->
  <div class="text-center mb-3">
    <label for="tamanoFicha" class="form-label">Tama침o de visualizaci칩n:</label>
    <select id="tamanoFicha" class="form-select w-auto d-inline-block ms-2">
      <option value="600">Peque침o (600px)</option>
      <option value="800" selected>Mediano (800px)</option>
      <option value="1000">Grande (1000px)</option>
    </select>
  </div>

  <div id="contenedorFicha" class="border border-secondary rounded shadow-sm mx-auto"
    style="width: 800px; position: relative;">
    <img id="imagenFicha" src="/f/ficha/image/{{ficha.id}}" alt="Ficha" class="w-100 d-block rounded" />
  </div>


  <!-- Botones de acci칩n -->
  <div class="text-center my-4">
    <div class="d-flex justify-content-center gap-4 flex-wrap">
      <button class="btn btn-primary" id="btnCorregir">Corregir</button>
      <button class="btn btn-secondary" onclick="descargarPDF()">Descargar en PDF</button>
      <button class="btn btn-success" onclick="window.history.back();">Aceptar</button>
    </div>
  </div>
  


</div>
<script type="application/json" id="elementosSuperpuestosRaw">
  {{{ficha.elementosSuperpuestos}}}
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script src="/js/verFicha.js"></script>
<script src="/js/like.js"></script>


{{> footer}}